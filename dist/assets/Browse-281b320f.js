import{a as w,S as k}from"./axios-8f551a67.js";import{H as v}from"./HorizontalItemList-36d617c1.js";import{d as y,r as u,o as S,c as m,a as B,b as g,F as C,e as x,f as r,g as D,u as F,h as H}from"./index-f7f13035.js";const L={key:1,class:"flex-col"},M={class:"showList"},A=y({__name:"Browse",setup(R){const d=["Drama","Science-Fiction","Action","Horror","Romance","Mystery","Fantasy","Anime","Comedy","Sports"],i=u(),n=u(new Map),l=u(!1);H();const h=F(),p=t=>t.map(e=>{var a,s;return{id:e.id,name:e.name,genres:e.genres,rating:(a=e.rating)==null?void 0:a.average,image:((s=e.image)==null?void 0:s.original)??void 0,siteUrl:e.officialSite}}).filter(e=>e.rating).sort((e,a)=>a.rating-e.rating),_=async()=>{l.value=!0;var t=[];try{for(var e=0;e<=10;){const{data:o}=await w.get(`https://api.tvmaze.com/shows?page=${e}`);t=t.concat(o),e++}if(t){i.value=p(t),n.value.set("general",i.value.slice(0,10));for(var a of d){var s=[];for(var c of i.value)if(c.genres.includes(a)&&s.push(c),s.length===10)break;n.value.set(a,s)}}}catch(o){console.log(o)}finally{l.value=!1}},f=t=>{h.push({name:"detail",params:{id:t}})};return S(()=>{_()}),(t,e)=>{var a;return r(),m("div",null,[l.value?(r(),B(k,{key:0})):(r(),m("div",L,[g(v,{title:"Top rated TV shows",items:(a=n.value)==null?void 0:a.get("general"),onClick:f},null,8,["items"]),(r(),m(C,null,x(d,(s,c)=>{var o;return D("div",M,[g(v,{title:s,items:(o=n.value)==null?void 0:o.get(s),onClick:f},null,8,["title","items"])])}),64))]))])}}});export{A as default};
