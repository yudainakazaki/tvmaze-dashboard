import{d as f,r as o,w as g,f as v,c as h,g as m,h as w,H as y,j as S,i as k,o as n,k as q,S as x,_ as B}from"./index-5f0d26af.js";const C={key:1,class:"list-container"},D=f({__name:"Search",setup(b){const s=S(),_=q(),t=o(),r=o(),c=o(!0),d=e=>e.map(a=>{var l,u;return{id:a.show.id,name:a.show.name??"-",genres:a.show.genres,rating:(l=a.show.rating)==null?void 0:l.average,image:((u=a.show.image)==null?void 0:u.original)??void 0,siteUrl:a.show.officialSite}}),i=async()=>{try{const{data:e}=await k.get(`https://api.tvmaze.com/search/shows?q=${t.value}`);e&&(r.value=d(e))}catch(e){console.log(e)}finally{c.value=!1}},p=e=>{_.push({name:"detail",params:{id:e}})};return g(()=>s.query.q,()=>{var e;t.value=(e=s.query.q)==null?void 0:e.toString(),i()}),v(()=>{var e;t.value=(e=s.query.q)==null?void 0:e.toString(),i()}),(e,a)=>(n(),h("div",null,[c.value?(n(),m(x,{key:0})):(n(),h("div",C,[w(y,{items:r.value,onClick:p,"is-search-page":!0},null,8,["items"])]))]))}});const H=B(D,[["__scopeId","data-v-15f4b7fe"]]);export{H as default};
