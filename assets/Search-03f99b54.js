import{a as f,S as m}from"./axios-19a8bf62.js";import{H as g}from"./HorizontalItemList-c50b9004.js";import{d as v,r as o,w,o as y,c as h,a as S,b as k,h as q,f as n,u as x,_ as b}from"./index-87c45513.js";const B={key:1,class:"list-container"},C=v({__name:"Search",setup(D){const s=q(),_=x(),t=o(),r=o(),c=o(!0),d=e=>e.map(a=>{var l,u;return{id:a.show.id,name:a.show.name??"-",genres:a.show.genres,rating:(l=a.show.rating)==null?void 0:l.average,image:((u=a.show.image)==null?void 0:u.original)??void 0,siteUrl:a.show.officialSite}}),i=async()=>{try{const{data:e}=await f.get(`https://api.tvmaze.com/search/shows?q=${t.value}`);e&&(r.value=d(e))}catch(e){console.log(e)}finally{c.value=!1}},p=e=>{_.push({name:"detail",params:{id:e}})};return w(()=>s.query.q,()=>{var e;t.value=(e=s.query.q)==null?void 0:e.toString(),i()}),y(()=>{var e;t.value=(e=s.query.q)==null?void 0:e.toString(),i()}),(e,a)=>(n(),h("div",null,[c.value?(n(),S(m,{key:0})):(n(),h("div",B,[k(g,{items:r.value,onClick:p,"is-search-page":!0},null,8,["items"])]))]))}});const R=b(C,[["__scopeId","data-v-15f4b7fe"]]);export{R as default};
